安装 Kuboard
kubectl apply -f https://kuboard.cn/install-script/kuboard.yaml
kubectl apply -f https://addons.kuboard.cn/metrics-server/0.3.6/metrics-server.yaml
查看 Kuboard 运行状态：
kubectl get pods -l k8s.eip.work/name=kuboard -n kube-system  
输出结果如下所示：
NAME                       READY   STATUS        RESTARTS   AGE
kuboard-54c9c4f6cb-6lf88   1/1     Running       0          45s
#获取Token
您可以获得管理员用户、只读用户的Token。
默认情况下，您可以使用 ServiceAccount 的 Token 登录 Kuboard
您还可以 使用 GitLab/GitHub 账号登录 Kuboard/Kubectl
您也可以 为用户授权
管理员用户
只读用户
拥有的权限

此Token拥有 ClusterAdmin 的权限，可以执行所有操作
执行命令

如果您参考 www.kuboard.cn 提供的文档安装 Kuberenetes，可在第一个 Master 节点上执行此命令
echo $(kubectl -n kube-system get secret $(kubectl -n kube-system get secret | grep kuboard-user | awk '{print $1}') -o go-template='{{.data.token}}' | base64 -d)
取输出信息中 token 字段

eyJhbGciOiJSUzI1NiIsImtpZCI6IiJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJhZG1pbi11c2VyLXRva2VuLWc4aHhiIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImFkbWluLXVzZXIiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiI5NDhiYjVlNi04Y2RjLTExZTktYjY3ZS1mYTE2M2U1ZjdhMGYiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZS1zeXN0ZW06YWRtaW4tdXNlciJ9.DZ6dMTr8GExo5IH_vCWdB_MDfQaNognjfZKl0E5VW8vUFMVvALwo0BS-6Qsqpfxrlz87oE9yGVCpBYV0D00811bLhHIg-IR_MiBneadcqdQ_TGm_a0Pz0RbIzqJlRPiyMSxk1eXhmayfPn01upPdVCQj6D3vAY77dpcGplu3p5wE6vsNWAvrQ2d_V1KhR03IB1jJZkYwrI8FHCq_5YuzkPfHsgZ9MBQgH-jqqNXs6r8aoUZIbLsYcMHkin2vzRsMy_tjMCI9yXGiOqI-E5efTb-_KbDVwV5cbdqEIegdtYZ2J3mlrFQlmPGYTwFI8Ba9LleSYbCi4o0k74568KcN_w
    
#访问Kuboard
您可以通过NodePort、port-forward 两种方式当中的任意一种访问 Kuboard

通过NodePort访问
通过port-forward访问
Kuboard Service 使用了 NodePort 的方式暴露服务，NodePort 为 32567；您可以按如下方式访问 Kuboard。

http://任意一个Worker节点的IP地址:32567/

输入前一步骤中获得的 token，可进入 Kuboard 集群概览页

TIP

如果您使用的是阿里云、腾讯云等，请在其安全组设置里开放 worker 节点 32567 端口的入站访问，
您也可以修改 Kuboard.yaml 文件，使用自己定义的 NodePort 端口号
#为开发测试人员授权
运维团队搭建好 Kubernetes 之后，需要授权开发/测试团队的成员执行某些特定的操作，例如更新镜像版本、查看容器日志、进入容器终端、通过Proxy访问接口等，以便开发测试人员可以自行完成日常的测试联调等任务。使用 Kubernetes + Kuboard 的团队可能以如下几种形式授权开发、测试人员访问：

为开发团队、测试团队创建各自的 ServiceAccount，并授权其访问指定的名称空间，请参考：
使用Kuboard管理ServiceAccount及RBAC；
授权 kuboard-viewer 查看日志
与自建的 gitlab / github 实现单点登录，并授权 gitlab/github 中的 group/user 访问指定的名称空间，请参考 Kubernetes Authentication 安装向导；
与自研的 PaaS 平台整合，免登录访问 Kuboard 提供的控制台界面、日志界面，请参考 免登录访问；

#免登陆访问
可以通过查询参数中的 k8sToken 字段直接登录系统，无需在登录界面输入 Token。

#直接访问集群概览页
如需要无登录访问集群概览页面，可使用如下格式的 url 进入：
http://任意一个Worker节点的IP地址:32567/dashboard?k8sToken=yourtoken
其他界面
其他任意 Kuboard 界面同理，只需要增加 k8sToken 作为查询参数，即可跳过输入 Token 的步骤
#直接访问终端界面
如果想要无登录直接访问容器组的控制台，可使用如下格式的 url 进入：

http://任意一个Worker节点的IP地址:32567/console/yournamespace/yourpod?containerName=yourcontainer&shell=bash&k8sToken=yourtoken
    
其中，shell 参数可选取值有：
bash，使用 /bin/bash 作为 shell
sh， 使用 /bin/sh 作为 shell



安装Kuboard（离线）
Sealyun Kubernetes， 一键离线安装 去看看
许多公司处于安全的考虑，需要将 Kuboard 离线安装到内网环境。本文描述了如何完成 Kuboard 的离线安装。请确保您已经熟悉了 安装Kuboard，本文只描述离线安装时，与正常安装的过程的差异部分。

#准备Kuboard镜像
#获取Kuboard镜像
在可以上网的机器上抓取 kuboard 镜像

docker pull eipwork/kuboard:latest

        已复制到剪贴板！

查看 kuboard 镜像的 ID

docker images | grep kuboard

        已复制到剪贴板！

输出结果如下所示：

eipwork/kuboard           latest                0146965e6475        3 weeks ago         133MB

        已复制到剪贴板！

将 Kuboard 镜像导出到文件

docker save 86eaead8421e > kuboard.tar

        已复制到剪贴板！

ImageID

请使用上一个步骤中查询到的 image ID

将 kuboard.tar 传输到 Kubernetes 集群的某一个节点上

#加载Kuboard镜像
在 Kubernetes 集群的某一个节点上执行

docker load < kuboard.tar

        已复制到剪贴板！

为镜像重新添加标签

docker tag 0146965e6475 eipwork/kuboard:latest

        已复制到剪贴板！

ImageID

请使用上一个步骤中查询到的 image ID

#准备kuboard.yaml文件
安装Kuboard的yaml文件如下，将其保存到 kuboard-offline.yaml

必要的修改

修改该文件中第 26 行的节点名称为上一个步骤中，已经加载了 kuboard 镜像的节点，参考 将容器组调度到指定节点
与在线安装不同，此处 ImagePullPolicy=IfNotPresent （第30行），参考 容器镜像
apiVersion: apps/v1
kind: Deployment
metadata:
  name: kuboard
  namespace: kube-system
  annotations:
    k8s.eip.work/displayName: kuboard
    k8s.eip.work/ingress: "false"
    k8s.eip.work/service: NodePort
    k8s.eip.work/workload: kuboard
  labels:
    k8s.eip.work/layer: monitor
    k8s.eip.work/name: kuboard
spec:
  replicas: 1
  selector:
    matchLabels:
      k8s.eip.work/layer: monitor
      k8s.eip.work/name: kuboard
  template:
    metadata:
      labels:
        k8s.eip.work/layer: monitor
        k8s.eip.work/name: kuboard
    spec:
      nodeName: your-node-name
      containers:
      - name: kuboard
        image: eipwork/kuboard:latest
        imagePullPolicy: IfNotPresent
      tolerations:
      - key: node-role.kubernetes.io/master
        effect: NoSchedule

---
apiVersion: v1
kind: Service
metadata:
  name: kuboard
  namespace: kube-system
spec:
  type: NodePort
  ports:
  - name: http
    port: 80
    targetPort: 80
    nodePort: 32567
    selector:
    k8s.eip.work/layer: monitor
    k8s.eip.work/name: kuboard

---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: kuboard-user
  namespace: kube-system

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: kuboard-user
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cluster-admin
subjects:
- kind: ServiceAccount
  name: kuboard-user
  namespace: kube-system

---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: kuboard-viewer
  namespace: kube-system

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: kuboard-viewer
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: view
subjects:
- kind: ServiceAccount
  name: kuboard-viewer
  namespace: kube-system

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: kuboard-viewer:kuboard-minimum-role
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: kuboard-minimum-role
subjects:
  - kind: ServiceAccount
    name: kuboard-viewer
    namespace: kube-system

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: kuboard-minimum-role
rules:
  - apiGroups:
    - ''
    resources:
    - 'namespaces'
    - 'nodes'
    verbs:
    - 'list'

        已复制到剪贴板！
    

执行命令
kubectl apply -f kuboard-offline.yaml

        已复制到剪贴板！

#登录Kuboard
登录 Kuboard 的方式同 安装Kuboard